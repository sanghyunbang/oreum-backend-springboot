<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC 
"-//mybatis.org//DTD Mapper 3.0//EN"
"file:///C:/Users/805-01/eclipse-workspace/padd/src/main/resources/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.oreum.goods.dao.GoodsOptionDAO">
  <insert id="insertGoodsOptions">
	  INSERT INTO GoodsOptions (goods_id, option_name, stock_qty)
	  VALUES
	  <foreach collection="options" item="opt" separator=",">
	    (#{opt.goodsId}, #{opt.optionName}, #{opt.stockQty})
	  </foreach>  </insert>
  <select id="findGoodsOptions" resultType="com.oreum.goods.dto.goodsOptionDTO">
  	SELECT * FROM GoodsOptions WHERE goods_id=#{id}
  </select>
  <update id="updateQty">
  	<foreach collection="items" item="item" separator=";">
    	UPDATE GoodsOptions
    	SET stock_qty = stock_qty - #{item.qty}
    	WHERE id = #{item.goods_options_id}
  	</foreach>
  </update>
</mapper>